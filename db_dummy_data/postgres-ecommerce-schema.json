{
  "metadata": {
    "dialect": "postgresql",
    "version": "1.0"
  },
  "tables": [
    {
      "name": "customers",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "primary_key": true,
          "default": "gen_random_uuid()"
        },
        {
          "name": "email",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "first_name",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "last_name",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "phone",
          "type": "varchar(20)",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "CURRENT_TIMESTAMP"
        }
      ]
    },
    {
      "name": "products",
      "columns": [
        {
          "name": "id",
          "type": "integer",
          "nullable": false,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "sku",
          "type": "varchar(50)",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(200)",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "price",
          "type": "decimal(10,2)",
          "nullable": false
        },
        {
          "name": "stock_quantity",
          "type": "integer",
          "nullable": false,
          "default": "0"
        },
        {
          "name": "active",
          "type": "boolean",
          "nullable": false,
          "default": "true"
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "CURRENT_TIMESTAMP"
        }
      ]
    },
    {
      "name": "orders",
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "customer_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "order_number",
          "type": "varchar(20)",
          "nullable": false
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "default": "'pending'"
        },
        {
          "name": "subtotal",
          "type": "decimal(10,2)",
          "nullable": false
        },
        {
          "name": "tax",
          "type": "decimal(10,2)",
          "nullable": false,
          "default": "0.00"
        },
        {
          "name": "shipping",
          "type": "decimal(10,2)",
          "nullable": false,
          "default": "0.00"
        },
        {
          "name": "total",
          "type": "decimal(10,2)",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "CURRENT_TIMESTAMP"
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "CURRENT_TIMESTAMP"
        }
      ],
      "foreign_keys": [
        {
          "name": "fk_orders_customer_id",
          "column": "customer_id",
          "references": {
            "table": "customers",
            "column": "id"
          },
          "on_delete": "RESTRICT",
          "on_update": "CASCADE"
        }
      ]
    },
    {
      "name": "order_items",
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "order_id",
          "type": "bigint",
          "nullable": false
        },
        {
          "name": "product_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "quantity",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "unit_price",
          "type": "decimal(10,2)",
          "nullable": false
        },
        {
          "name": "total_price",
          "type": "decimal(10,2)",
          "nullable": false
        }
      ],
      "foreign_keys": [
        {
          "name": "fk_order_items_order_id",
          "column": "order_id",
          "references": {
            "table": "orders",
            "column": "id"
          },
          "on_delete": "CASCADE",
          "on_update": "CASCADE"
        },
        {
          "name": "fk_order_items_product_id",
          "column": "product_id",
          "references": {
            "table": "products",
            "column": "id"
          },
          "on_delete": "RESTRICT",
          "on_update": "CASCADE"
        }
      ]
    },
    {
      "name": "addresses",
      "columns": [
        {
          "name": "id",
          "type": "integer",
          "nullable": false,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "customer_id",
          "type": "uuid",
          "nullable": false
        },
        {
          "name": "type",
          "type": "varchar(20)",
          "nullable": false,
          "default": "'shipping'"
        },
        {
          "name": "street_address",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "city",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "state_province",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "postal_code",
          "type": "varchar(20)",
          "nullable": false
        },
        {
          "name": "country",
          "type": "varchar(2)",
          "nullable": false
        }
      ],
      "foreign_keys": [
        {
          "name": "fk_addresses_customer_id",
          "column": "customer_id",
          "references": {
            "table": "customers",
            "column": "id"
          },
          "on_delete": "CASCADE",
          "on_update": "CASCADE"
        }
      ]
    }
  ]
}